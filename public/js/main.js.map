{"version":3,"sources":["main.js"],"names":["width","height","force","d3","layout","charge","linkDistance","size","svg","select","append","attr","json","error","services","tmpnodes","links","forEach","e","target","b","_id","source","push","id","name","properties","exists","nodes","undefined","graph","nodeById","map","node","set","link","get","start","selectAll","data","enter","style","d","call","drag","on","x","y"],"mappings":"AAAA,YAAA,IAAIA,OAAQ,IACRC,OAAS,IAETC,MAAQC,GAAGC,OAAOF,QACjBG,OAAO,MACPC,aAAa,IACbC,MAAMP,MAAOC,SAEdO,IAAML,GAAGM,OAAO,QAAQC,OAAO,OAC9BC,KAAK,QAASX,OACdW,KAAK,SAAUV,OAEpBE,IAAGS,KAAK,QAAS,SAASC,EAAOC,GAC/B,GAAID,EAAO,KAAMA,EAEjB,IAAIE,MACAC,IAEJF,GAASG,QAAQ,SAASC,GACxB,GAAIC,GAASD,EAAEE,EAAEC,IACbC,EAASJ,EAAEJ,SAASO,GACxBL,GAAMO,MAAMD,OAAQA,EAAQH,OAAQA,IAEpCJ,EAASQ,MAAMC,GAAML,EAAQM,KAAQP,EAAEE,EAAEM,WAAWD,OACpDV,EAASQ,MAAMC,GAAMF,EAAQG,KAAQP,EAAEJ,SAASY,WAAWD,QAG7D,IAAIE,MACAC,IACJb,GAASE,QAAQ,SAASC,GACJW,QAAhBF,EAAOT,EAAEM,MACXI,EAAML,KAAKL,GACXS,EAAOT,EAAEM,KAAM,IAInB,IAAIM,IAASF,MAAOA,EAAOZ,MAAOA,GAE9Be,EAAW5B,GAAG6B,KAElBF,GAAMF,MAAMX,QAAQ,SAASgB,GAC3BF,EAASG,IAAID,EAAKT,GAAIS,KAGxBH,EAAMd,MAAMC,QAAQ,SAASkB,GAC3BA,EAAKb,OAASS,EAASK,IAAID,EAAKb,QAChCa,EAAKhB,OAASY,EAASK,IAAID,EAAKhB,UAGlCjB,MACK0B,MAAME,EAAMF,OACZZ,MAAMc,EAAMd,OACZqB,OAEL,IAAIF,GAAO3B,IAAI8B,UAAU,SACpBC,KAAKT,EAAMd,OACbwB,QAAQ9B,OAAO,QACbC,KAAK,QAAS,QAEfsB,EAAOzB,IAAI8B,UAAU,SACpBC,KAAKT,EAAMF,OACbY,QAAQ9B,OAAO,UACbC,KAAK,QAAS,QACdA,KAAK,IAAK,IACV8B,MAAM,OAAQ,SAASC,GAAK,MAAOA,GAAElB,KACrCmB,KAAKzC,MAAM0C,KAEhB1C,OAAM2C,GAAG,OAAQ,WACfV,EAAKxB,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEpB,OAAOwB,IACzCnC,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEpB,OAAOyB,IACzCpC,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEvB,OAAO2B,IACzCnC,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEvB,OAAO4B,IAE9Cd,EAAKtB,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEI,IAClCnC,KAAK,KAAM,SAAS+B,GAAK,MAAOA,GAAEK","file":"main.js","sourcesContent":["var width = 960,\n    height = 500;\n\nvar force = d3.layout.force()\n    .charge(-200)\n    .linkDistance(80)\n    .size([width, height]);\n\nvar svg = d3.select(\"body\").append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\nd3.json(\"/info\", function(error, services) {\n  if (error) throw error;\n\n  var tmpnodes = [];\n  var links = [];\n\n  services.forEach(function(e) {\n    var target = e.b._id;\n    var source = e.services._id;\n    links.push({source: source, target: target});\n\n    tmpnodes.push({\"id\": target, \"name\": e.b.properties.name});\n    tmpnodes.push({\"id\": source, \"name\": e.services.properties.name});\n  });\n\n  var exists = [];\n  var nodes = [];\n  tmpnodes.forEach(function(e) {\n    if (exists[e.id] == undefined) {\n      nodes.push(e);\n      exists[e.id] = true;\n    }\n  });\n\n  var graph = {nodes: nodes, links: links};\n\n  var nodeById = d3.map();\n\n  graph.nodes.forEach(function(node) {\n    nodeById.set(node.id, node);\n  });\n\n  graph.links.forEach(function(link) {\n    link.source = nodeById.get(link.source);\n    link.target = nodeById.get(link.target);\n  });\n\n  force\n      .nodes(graph.nodes)\n      .links(graph.links)\n      .start();\n\n  var link = svg.selectAll(\".link\")\n      .data(graph.links)\n    .enter().append(\"line\")\n      .attr(\"class\", \"link\");\n\n  var node = svg.selectAll(\".node\")\n      .data(graph.nodes)\n    .enter().append(\"circle\")\n      .attr(\"class\", \"node\")\n      .attr(\"r\", 18)\n      .style(\"fill\", function(d) { return d.id; })\n      .call(force.drag);\n\n  force.on(\"tick\", function() {\n    link.attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n    node.attr(\"cx\", function(d) { return d.x; })\n        .attr(\"cy\", function(d) { return d.y; });\n  });\n});\n"],"sourceRoot":"/source/"}